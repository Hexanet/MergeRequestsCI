<!doctype html>
<html  ng-app="app">
<head>
  <meta charset="utf-8">
  <title>Merge Request CI</title>
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="app.css">
</head>
<body ng-controller='MainCtrl as vm'>

  <div class="row">
    <div class="large-10 columns">
      <h1>Merge requests CI</h1>
    </div>
    <div class="large-2 columns">
      Last refresh : {{ vm.lastRefresh | date:'shortTime' }}
      <a ng-click="vm.refresh()" class="button">Refresh</a>
    </div>
  </div>

  <div class="row">
    <table class="twelve columns">
      <thead>
        <tr>
          <th>Date</th>
          <th>Projet</th>
          <th>Title</th>
          <th>Author</th>
          <th>Branch</th>
          <th ng-bind-html="':+1:'|emojify"></th>
          <th ng-bind-html="':-1:'|emojify"></th>
          <th>CI</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="mergeRequest in vm.mergeRequests">
          <td>{{ mergeRequest.lastActivity | date:'short' }}</td>
          <td><a href="{{ mergeRequest.project.web_url }}" target="_blank">{{ mergeRequest.project.name }}</a></td>
          <td><a href="{{ mergeRequest.web_url }}" target="_blank" ng-bind-html="mergeRequest.title|emojify"></a></td>
          <td class=""><img ng-src="{{ mergeRequest.author.avatar_url }}" width="35px" alt="{{ mergeRequest.author.name }}"></img></td>
          <td>{{ mergeRequest.source_branch }} -> {{ mergeRequest.target_branch }}</td>
          <td>{{ mergeRequest.votes.up }}</td>
          <td>{{ mergeRequest.votes.down }}</td>
          <td>
            <span ng-if="mergeRequest.ci" ng-class="{'success': mergeRequest.ci == 'success', 'alert': mergeRequest.ci == 'failed'}" class="label">{{ mergeRequest.ci }}</span>
          </td>
        </tr>
      <tbody>
    </table>
  </div>

  <script src="vendor.js"></script>
  <script src="app.js"></script>
</body>
</html>
